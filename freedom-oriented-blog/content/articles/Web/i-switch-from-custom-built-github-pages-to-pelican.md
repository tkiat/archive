Title: I Switch from Custom-Built Github Pages to Pelican
Date: 2021-01-21
Modified: 2021-01-21
Tags: Web
Slug: i-switch-from-custom-built-github-pages-to-pelican
Authors: Theerawat Kiatdarakun

I did a previous GitHub Pages website from scratch where I designed a blog using simple book carousel animation and also set up back-end (Terraform, CodeCommit, S3, DynamoDB) for blog data connected to GitHub Pages. That was admittedly overkill for a simple blog but I just wanted to learn AWS. It took more than 2 months with almost full-time workload. The navigation was not that smooth as it was not a simple as in KISS principle.

As I gained a bit more experience, I realized that it was a total waste of time. Instead of doing everything by my own, I can simply use a static site generator and be done with it. This way, I push much of the responsibilities to some other developers for the UI part, focusing on what is important instead.

A static site generator recommended by GitHub is Jekyll because of native support. I first tried it, but I got many problems with Ruby in which Jekyll depends on. Since I used Guix System Linux distribution, the functional package management style made it hard to do a Ruby project without some familiarity with it (since I couldn't blindly follow tutorials). I actually tried to use Jekyll in Guix but I was frustrated with the libffi error when installing packages via RubyGems. I didn't have time learning Ruby and hacking Guix just to publish a static website. I therefore opted for another tool: Pelican.

Pelican is a static site generator just like Jekyll but it is based on Python. It supports GitHub Pages out of the box. To publish a Pelican on GitHub Pages, I need to add "output" directory generated by Pelican as a git submodule whose remote is my GitHub pages repository `git@github.com:username/username.github.io.git`. This is very nice since I can make the submodule as a public repository while keeping another repository containing the "output" folder as private. I come across a good tutorial on [https://fedoramagazine.org/make-github-pages-blog-with-pelican](https://fedoramagazine.org/make-github-pages-blog-with-pelican) which worked well to me.

### Configure Pelican
- Highlighting. Pelican utilizes CodeHilite for Markdown document. It uses Pygments library to highlight code blocks ([list of available languages](https://pygments.org/languages/)). It sometimes tries to guess the language and encloses what it thinks as an error in a red box. I overwrite the default as follows.
```python
# pelicanconf.py
MARKDOWN = {
    'extension_configs': {
        'markdown.extensions.codehilite': {'css_class': 'highlight', 'guess_lang': 'False', 'linenums': 'True'},
        'markdown.extensions.extra': {},
        'markdown.extensions.meta': {},
    },
    'output_format': 'html5',
}
```
- Theme. The most starred theme for Pelican seemed to be Elegant but, in my opinion, it is not minimal enough. I searched through [list of Pelican themes](https://github.com/getpelican/pelican-themes) and finally selected [voce theme](https://github.com/limbenjamin/voce). It looks minimalistic enough while the navigation is easy thanks to the well-placed tags.

### Configure the voce Theme
- The theme uses Jinja, an HTML template engine. I added word count of each article by adding `| wordcount`.
- The theme uses Font Awesome version 4.5.0 by default. I need to upgrade to 4.6.0 to use the fa-gitlab icon.
- I make the theme more compact.
- Probably I will add night mode as well.

### Configure GitHub Pages
- Add .nojekyll at the root directory. A classic source of bugs for many.
