"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],o=!0,n=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){n=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(n)throw a}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}redirectIfURLNotValid(window.location.href,"#about");var books,recreateBookmark,bookshelf=document.getElementById("blog-bookshelf"),helper=document.getElementById("helper"),colorTheme=getColorTheme(),currentBlogState="A",currentPage=getCurrentPage(),disableNextHashChangeEvent=!1,hrefHelperBlogPage="",isBookAnimPaused=!1,isBookMetadataReady=!1,pathBlogStructure=hostname+"/blog-structure.json",pathArticleMetadata=hostname+"/article-metadata.json",toRecreateBookmark=!1;function assignClassToGrid(){document.getElementById("about").classList.add("about"===currentPage?"grid__primary":"project"===currentPage?"grid__secondary-left":"grid__secondary-right"),document.getElementById("blog").classList.add("blog"===currentPage?"grid__primary":"about"===currentPage?"grid__secondary-left":"grid__secondary-right"),document.getElementById("project").classList.add("project"===currentPage?"grid__primary":"about"===currentPage?"grid__secondary-right":"grid__secondary-left"),document.getElementById("helper").classList.add("grid__helper--"+currentPage)}function assignTabIndexToGrid(){var e=1;document.querySelector(".grid__secondary-left").querySelector(".grid__label").setAttribute("tabindex",++e),document.getElementById("helper-item").setAttribute("tabindex",++e),document.querySelector(".grid__secondary-right").querySelector(".grid__label").setAttribute("tabindex",4)}function automaticBlogPageTransition(){var e=document.location.hash.slice(1).split("/");["about","blog","project"].includes(e[0])&&1===e.length||"blog"===e[0]&&3<=e.length&&e.length<=4&&(disableNextHashChangeEvent=!0,window.location.href="#blog",window.location.href=window.location.href+"/"+e[1]+"/"+e[2],4===e.length&&(window.location.href=window.location.href+"/"+e[3]))}function getColorTheme(){var e=getRandomInt(0,2);return{r:0===e?235:185,g:1===e?235:185,b:2===e?235:185,r_step:0===(e=getRandomInt(0,2))?15:25,g_step:1===e?15:25,b_step:2===e?15:25}}function getCurrentPage(){var t=document.location.hash.slice(1);return["about","blog","project"].find(function(e){return t.startsWith(e)})}function getHashPartURL(e){return e.slice(e.indexOf("#")+1)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function hrefForward(e){return document.location.hash+"/"+e}function hrefBackward(){return document.location.hash.split("/").slice(0,-1).join("/")}function isURLValid(e){if(-1===e.indexOf("#"))return!1;var t=decodeURIComponent(getHashPartURL(e)).split("/");return!(1!==t.length||!["about","blog","project"].includes(t[0]))||("blog"===t[0]&&!isBookMetadataReady||!("blog"!==t[0]||!isBookMetadataReady)&&(!!(!t[1]||t[1]&&bookshelf.querySelector('[data-book-title="'.concat(t[1],'"]')))&&(!!(!t[2]||"All Chapters"===t[2]||t[2]&&bookshelf.querySelector('[data-book-title="'.concat(t[1],'"]')).chapters.includes(t[2]))&&!!(!t[3]||t[3]&&bookshelf.querySelector('[data-book-title="'.concat(t[1],'"]')).articles.find(function(e){return e.filename===t[3]})))))}function redirectIfURLNotValid(e,t){isURLValid(e)||redirectToPage(t)}function redirectToPage(e){console.log("Redirect to "+e+"..."),window.location.replace(e),location.reload()}function sendMail(){document.getElementById("helper-item").href="mailto:kiatd.t@outlook.com?subject="+encodeURIComponent("Hi Theerawat")+"&body="+encodeURIComponent("Hi Theerawat\n\n\n\nBest Regards,\n")}function setGlobalColorTheme(e){document.documentElement.style.setProperty("--theme-color-dark","rgb(".concat(e.r-4*e.r_step,",").concat(e.g-4*e.g_step,",").concat(e.b-4*e.b_step,")")),document.documentElement.style.setProperty("--theme-color-light","rgb(".concat(e.r,",").concat(e.g,",").concat(e.b,")")),document.documentElement.style.setProperty("--theme-color-superlight","rgb(".concat(e.r+1.5*e.r_step,",").concat(e.g+1.5*e.g_step,",").concat(e.b+1.5*e.b_step,")"))}function swapGridItems(e,t){var r=e.classList.contains("grid__secondary-left")?"grid__secondary-left":"grid__secondary-right";t.classList.replace("grid__primary",r),e.classList.replace(r,"grid__primary"),document.getElementById("helper").classList.replace("grid__helper--"+t.id,"grid__helper--"+e.id)}setGlobalColorTheme(colorTheme),getBookMetadata(pathBlogStructure,pathArticleMetadata).then(function(e){var t=_slicedToArray(e,2),r=t[0],o=t[1];return applyBookMetadata(r,o,colorTheme)}).then(function(){isBookMetadataReady=!0,redirectIfURLNotValid(window.location.href,"#about"),assignClassToGrid(),assignTabIndexToGrid(),triggerBookAnimation(),automaticBlogPageTransition()}).then(function(){setTimeout(function(){document.body.style.visibility="visible"},200)}).catch(function(e){return console.error("Error: "+e)}),window.onresize=function(){"C"===currentBlogState&&(toRecreateBookmark=!0),"blog"===currentPage&&"B"===currentBlogState&&(clearTimeout(recreateBookmark),recreateBookmark=setTimeout(function(){getTopBook().reinsertAllBookmarks()},200))},window.onhashchange=function(e){var t,r,o,n,a,i,l,c;disableNextHashChangeEvent?disableNextHashChangeEvent=!1:(redirectIfURLNotValid(e.newURL,"#about"),t=getHashPartURL(decodeURIComponent(e.oldURL)).split("/"),r=getHashPartURL(decodeURIComponent(e.newURL)).split("/"),t[0]!==r[0]?(o=document.getElementById(t[0]),swapGridItems(n=document.getElementById(r[0]),o),document.getElementById("grid").classList.add("grid--far"),setTimeout(function(){document.getElementById("grid").classList.remove("grid--far")},500),currentPage=n.id,assignTabIndexToGrid()):"blog"===t[0]&&"blog"===r[0]&&(a=r[1]?r[1]:null,i=r[2]?r[2]:null,l=r[3]?r[3]:null,1===t.length&&a&&i?stateAtoB(a,i):3===t.length&&i&&!l?stateBtoB(t[2],i):3===t.length&&i&&l?(c=getTopBook().articles.find(function(e){return e.filename===l}),stateBtoC(hostname+"/Blog/"+a+"/"+c.chapter+"/"+c.filename),hrefHelperBlogPage="#blog/"+a+"/"+i):4===t.length&&3===r.length?stateCtoB():3===t.length&&1===r.length&&stateBtoA()))},document.getElementById("helper").addEventListener("click",function(){switch(currentPage){case"about":sendMail();break;case"blog":document.getElementById("helper-item").href=hrefHelperBlogPage;break;case"project":document.getElementById("helper-item").href="javascript:void(0)",window.open("https://github.com/","_blank")}});