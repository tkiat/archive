"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],a=!0,r=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(o.push(l.value),!t||o.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function applyBookMetadata(e,t,o){var a=_slicedToArray(getAllMappings(e,t,o),3),r=a[0],n=a[1],l=a[2];Object.keys(r).forEach(function(e,t){var o=new BlogBook(e,r[e],n[e],l[e],t);o.addEventListener("mouseout",function(){isBookAnimPaused=!1}),o.addEventListener("mouseover",function(){isBookAnimPaused=!0}),bookshelf.insertBefore(o,bookshelf.firstChild);var a=createBlogMenuItem(e);document.getElementById("blog-menu").appendChild(a)}),books=bookshelf.querySelectorAll(".book"),document.getElementById("blog-menu-"+getTopBook().dataset.bookTitle).classList.add("blog__menu-item--topbook")}function createBlogMenuItem(e){var t=document.createElement("a");return t.id="blog-menu-"+e,t.classList="blog__menu-item",t.href="#blog/"+e+"/All Chapters",t.textContent=e,t.addEventListener("mouseout",function(){isBookAnimPaused=!1}),t.addEventListener("mouseover",function(){isBookAnimPaused=!0,moveBookToTop(e)}),t}function createArticleTable(a,r,e){var t=document.createElement("table");t.classList.add("book-table"),t.innerHTML="\n\t\t<thead>\n\t\t\t<th class='book-table__title' colspan='3'>".concat(a,"</th>\n\t\t\t<tr class='book-table__header'>\n\t\t\t\t<th class='book-table__header-item book-table__header-item--create'><a class='book-table__header-link' href=\"javascript:void(0)\">Created</a></th>\n\t\t\t\t<th class='book-table__header-item book-table__header-item--update'><a class='book-table__header-link' href=\"javascript:void(0)\">Updated</a></th>\n\t\t\t\t<th class='book-table__header-item book-table__header-item--title'><a class='book-table__header-link' href=\"javascript:void(0)\">Title</a></th>\n\t\t\t</tr>\n\t\t</thead>\n\t");var o=document.createElement("tbody"),n=document.createDocumentFragment();r.forEach(function(e){var t=document.createElement("tr");t.classList.add("book-table__row"),t.innerHTML="\n\t\t\t<td class='book-table__row-item'>".concat(new Date(e.create).toDateString().split(" ").slice(1).join(" "),"</td>\n\t\t\t<td class='book-table__row-item'>").concat(new Date(e.update).toDateString().split(" ").slice(1).join(" "),"</td>\n\t\t\t<td class='book-table__row-item'><a class='book-table__row-link' href=").concat(hrefForward(e.filename),">").concat(e.title,"</a></td>\n\t\t"),n.appendChild(t)}),o.appendChild(n),t.appendChild(o);var l=getTopBook(),i=t.querySelectorAll(".book-table__header-item"),s=document.createElement("span");return s.classList.add("book-table__header-icon"),s.innerHTML=0<l.sortDirection?" &#x25BE":" &#x25B4",i[e].appendChild(s),i.forEach(function(e,o){e.addEventListener("click",function(){var e=["create","update","title"][o],t=("title"===e?sortArrayOfJSONByString:sortArrayOfJSONByDate)(r,e,l.sortDirection*=-1);displayBookTable(a,t,o)})}),t}function displayBookTable(e,t,o){for(var a=getTopBook().querySelector(".book-content");a.firstChild;)a.removeChild(a.lastChild);a.appendChild(createArticleTable(e,t,o))}function getAllMappings(e,l,o){for(var i={},s={},c={},d=0,u=Object.entries(e);d<u.length;d++)!function(){var e=_slicedToArray(u[d],2),a=e[0],t=e[1];i[a]=[],s[a]=[],c[a]="rgb(".concat(o.r-=o.r_step,",").concat(o.g-=o.g_step,",").concat(o.b-=o.b_step,")");for(var r=0,n=Object.entries(t);r<n.length;r++)!function(){var e=_slicedToArray(n[r],2),t=e[0],o=e[1];i[a].push(t),o.forEach(function(e){s[a].push(Object.assign({},l[e],{chapter:t},{filename:e}))})}()}();return[i,s,c]}function getBookMetadata(e,t){var o=fetch(e,{method:"GET",mode:"cors"}).then(function(e){return e.json()}),a=fetch(t,{method:"GET",mode:"cors"}).then(function(e){return e.json()});return Promise.all([o,a])}function getTopBook(){return books[books.length-1]}function moveBookToTop(e){var t;getTopBook().dataset.bookTitle===e||(t=bookshelf.querySelector('[data-book-title="'.concat(e,'"]')))&&(document.getElementById("blog-menu-"+getTopBook().dataset.bookTitle).classList.remove("blog__menu-item--topbook"),bookshelf.appendChild(t),books=bookshelf.querySelectorAll(".book"),books.forEach(function(e,t){e.setBookOffset(books.length-1-t)}),document.getElementById("blog-menu-"+getTopBook().dataset.bookTitle).classList.add("blog__menu-item--topbook"))}function moveTopBookToBottom(){document.getElementById("blog-menu-"+getTopBook().dataset.bookTitle).classList.remove("blog__menu-item--topbook"),bookshelf.insertBefore(getTopBook(),bookshelf.firstChild),books=bookshelf.querySelectorAll(".book"),books.forEach(function(e,t){e.setBookOffset(books.length-1-t)}),document.getElementById("blog-menu-"+getTopBook().dataset.bookTitle).classList.add("blog__menu-item--topbook")}function sortArrayOfJSONByDate(e,o,a){return e.sort(function(e,t){return(new Date(e[o])-new Date(t[o]))*a})}function sortArrayOfJSONByString(e,r,n){return e.sort(function(e,t){var o=e[r].toLowerCase(),a=t[r].toLowerCase();return o==a?0:a<o?n:-n})}function stateAtoB(e,t){currentBlogState="B",moveBookToTop(e);var o=getTopBook();isBookAnimPaused=!0,helper.querySelector(".grid__label").classList.add("grid__label--appear"),o.classList.add("book--opened"),o.insertAllBookmarks(function(){stateBtoB(null,t),getTopBook().querySelector('[data-chapter="'.concat(t,'"]')).classList.add("book-bookmark__item--disappear")}),document.getElementById("blog-menu").style.display="none",document.getElementById("blog-label").href=document.location.hash,hrefHelperBlogPage="#blog"}function stateBtoB(e,t){var o=getTopBook();try{e&&o.querySelector('[data-chapter="'.concat(e,'"]')).classList.remove("book-bookmark__item--disappear"),o.querySelector('[data-chapter="'.concat(t,'"]')).classList.add("book-bookmark__item--disappear")}catch(e){console.log("Invalid URL: reload..."),window.location.replace("#blog"),console.error(e)}for(var a=o.querySelector(".book-content");a.firstChild;)a.removeChild(a.lastChild);var r="All Chapters"===t?o.articles:o.articles.filter(function(e){return e.chapter===t});displayBookTable(t,r,0),document.getElementById("blog-label").href=document.location.hash}function stateBtoC(e){fetch(e,{method:"GET",mode:"cors"}).then(function(e){return e.text()}).then(function(e){currentBlogState="C",document.getElementById("blog-label").href=document.location.hash,getTopBook().classList.add("book--reading"),setTimeout(function(){document.getElementById("blog-article").style.display="block",document.getElementById("blog-article").dataset.content=e},1e3)})}function stateCtoB(){document.getElementById("blog-article").style.display="none",currentBlogState="B",getTopBook().classList.remove("book--reading"),toRecreateBookmark&&(getTopBook().reinsertAllBookmarks(),toRecreateBookmark=!1),document.getElementById("blog-label").href=document.location.hash,hrefHelperBlogPage="#blog"}function stateBtoA(){var e=getTopBook();e.removeAllBookmarks(),e.classList.remove("book--opened"),helper.querySelector(".grid__label").classList.remove("grid__label--appear"),currentBlogState="A",isBookAnimPaused=!1,document.getElementById("blog-label").href=document.location.hash,document.getElementById("blog-menu").style.display="block"}function triggerBookAnimation(){setInterval(function(){"blog"!==currentPage||"A"!==currentBlogState||isBookAnimPaused||moveTopBookToBottom()},4e3)}